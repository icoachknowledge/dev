---
title: Подключение формы заказа
category: Общее
order: 2
---

Есть несколько способов сбора заказов на лендинге. Способ, который будет использоваться в конкретном проекте, нужно посмотреть в ТЗ на вёрстку или уточнить у менеджера проекта.

## Facebook Messenger

Кнопки заказа на лендинге ведут на Facebook Messenger.

~~~ html
{% raw %}<a href="https://m.me/{{ site.fb_group_id }}?ref=start" onclick="fbq('track', 'Lead');">Текст на кнопке</a>{% endraw %}
~~~

В _config.yml должен быть указан параметр ```fb_group_id``` — идентификатор бизнес-страницы фейсбука, от имени которой будет вестись переписка с потенциальным клиентом в messenger.

Например, если группа https://www.facebook.com/**icoach.io**/, то идентификатор ```icoach.io```

Если группа https://business.facebook.com/Обучение-Северному-Массажу-**143838456222182**/, то идентификатор ```143838456222182```

## Стандартная форма

Кнопки на лендинге вызывают всплывающую форму заказа, которая отправляет POST запрос на bot.nickvorobiov.com

Код кнопки
~~~ html
<button type="button" data-toggle="modal" data-target="#modal">Текст на кнопке</button>
~~~

Код стандартной формы содержится в ```_includes/form.html``` и подключается с помощью ```{% raw %}{% include form.html %}{% endraw %}```

В стандартную форму можно добавлять новые поля и удалять стандартные. Например, чтобы спрашивать скайп, а не телефон, нужно добавить соответствующее поле с именем skype:

~~~ html
<input id="input-skype" required="required" name="skype" type="text" class="form-control" placeholder="Скайп">
~~~

Стандартная форма содержит скрытые поля, которые определяют подключение формы.

~~~ html
<input type="hidden" name="trello-list-id" value="{{ site.trello-list-id }}" />
<input type="hidden" name="redirect" value="{{ site.url }}/ok/" />
<input type="hidden" name="offer" value="{{ site.offer }}" />
<input type="hidden" name="traffic_source" />
<input type="hidden" name="roistat" />
~~~

Для того, чтобы установить значения этих полей, и тем самым подключить форму, нужно указать соответствующие значения в _config.yml

~~~ yaml
trello-list-id: 59a6c5dd41b91215aa6c10b6 # идентификатор списка, в который будут попадать заявки
offer: "Иван Иванов — скайп-консультация" # кому и на что заявка
~~~

Значения полей ```trello-list-id``` и ```offer``` нужно взять из ТЗ на вёрстку.

Поле ```redirect``` определяет, куда будет перенаправлен браузер посетителя, оставившего заявку. Обычно это страница /ok/

Так как страница /ok/ открывается сразу после получения заявки, на ней нужно отправить событие facebook Lead в front matter страницы

~~~ yaml
---
layout: base
facebook_event: Lead
---
~~~

## Форма Activecampaign

Иногда вместо стандартной формы мы подключаем форму Activecampaign. Подключается аналогично стандартной, с несколькими особенностями

### Идентификатор формы 

Нужно взять в ТЗ и указать в _config.yml идентификатор формы

~~~ yaml
activecampaign-form-id: 12
~~~

### Отсутствует поле redirect

В форме отсутствует поле ```redirect```. Браузер пользователя всегда перенаправляется на /ok/

### Страница ok 

Попадание на странцу /ok/ ещё не означает оставленную заявку, поэтому событие Lead **НЕ** должно вызываться на странице /ok/

Также мы просим пользователя подтвердить емейл. Содержание страницы /ok/ — длинный текст про то, как именно открывать свой почтовый ящик и подтверждать емейл. Страницу с этим текстом можно скопировать из другого проекта.

### Страница confirmed

Страница /confirmed/ открывается сразу после подтверждения пользователем емейла (клика по ссылке «Подтверждаю» в письме) поэтому мы отправляем событие facebook Lead в front matter страницы

~~~ yaml
---
layout: base
facebook_event: Lead
---
~~~

Также на этой странице мы размещаем то, что обычно размещается на странице /ok/ — благодарность, призыв вступить в группу, ссылку на вебинар, адрес проведения тренинга.
